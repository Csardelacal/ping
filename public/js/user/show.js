(()=>{var e={828:e=>{var t=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}e.exports=function(e,n){for(;e&&e.nodeType!==t;){if("function"==typeof e.matches&&e.matches(n))return e;e=e.parentNode}}},438:(e,t,n)=>{var i=n(828);function r(e,t,n,i,r){var a=s.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function s(e,t,n,r){return function(n){n.delegateTarget=i(n.target,t),n.delegateTarget&&r.call(e,n)}}e.exports=function(e,t,n,i,s){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof n?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,n,i,s)})))}},132:e=>{"use strict";var t={byMatcher:function(e,t,n){if(void 0===n&&(n={}),null===n||Array.isArray(n)||"object"!=typeof n)throw new Error("Expected opts to be an object.");if(e&&e!==document)return t(e)?e:this.byMatcher(e.parentNode,t,n);if(n.throwOnMiss)throw new Error("Expected to find parent node, but none was found.")},byClassName:function(e,t,n){return this.byMatcher(e,(function(e){return e.classList.contains(t)}),n)},withDataAttribute:function(e,t,n){return this.byMatcher(e,(function(e){return e.dataset.hasOwnProperty(t)}),n)}};e.exports=t}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(438),t=n.n(e),i=n(132),r=n.n(i),s=function(e){e instanceof NodeList&&(e=Array.prototype.slice.call(e,0)),this.elements=e};function a(e){return new s(e)}s.prototype={each:function(e){var t=this.elements instanceof Array?[]:{};if(!this.elements instanceof Array)for(var n in this.elements)this.elements.hasOwnProperty(n)&&(t[n]=e(this.elements[n],n));else for(n=0;n<this.elements.length;n++)t[n]=e(this.elements[n],n);return new s(t)},filter:function(e){var t=new s([]);return this.each((function(n){e(n)&&t.push(n)})),t},merge:function(e){var t=this;return e instanceof s||(e=new s(e)),e.each((function(e,n){t.elements instanceof Array?t.elements.push(e):t.elements[n]=e})),this},reduce:function(e){return this.elements.reduce(e)},push:function(e){this.elements.push(e)},pop:function(){return this.elements.pop()},set:function(e,t){this.elements[e]=t},get:function(e){return this.elements[e]},raw:function(){return this.elements},length:function(){if(this.elements instanceof Array)return this.elements.length;var e=0;return this.each((function(){e++})),e}};var o=function(e){this.element=e,this.view=void 0;var t=this;this.element.addEventListener("onkeyup",(function(){t.view.set(t.for()[0],this.value)})),this.element.addEventListener("change",(function(){"radio"===this.type||"checkbox"===this.type?t.view.set(t.for()[0],"on"===this.value||(this.value||this.checked)):t.view.set(t.for()[0],this.value)}))};o.prototype={readOnly:function(){return!1},for:function(){return[this.element.getAttribute("data-for")]},parent:function(e){return this.view=e,this},refresh:function(){var e=this.view.get(this.for()[0]);if(console.log(this.element.type),"radio"===this.element.type||"checkbox"===this.element.type)return console.log(this.for()[0]),console.log(e),void(this.element.value&&this.element.value===e||!0===e?this.element.checked=!0:this.element.checked=!1);this.element.value=e}};const u={InputAdapter:o,findAdapters:function(e){return e.getAttribute("data-for")&&("input"===e.tagName.toLowerCase()||"textarea"===e.tagName.toLowerCase())?[new o(e)]:[]}};function h(e){this.view=void 0,this.getValue=function(){return-1===e.selectedIndex?null:e.options[this.getElement().selectedIndex].value},this.setValue=function(t){var n=Array.prototype.slice.call(e.options,0);e.selectedIndex=n.indexOf(e.querySelector('[value="'+t+'"]'))},this.for=function(){return[e.getAttribute("data-for")]},this.parent=function(e){return this.view=e,this},this.refresh=function(){var t=Array.prototype.slice.call(e.options,0);e.selectedIndex=t.indexOf(e.querySelector('[value="'+this.view.get(this.for()[0])+'"]'))}}const l={SelectAdapter:h,findAdapters:function(e){return"select"===e.tagName.toLowerCase()?[new h(e)]:[]}};function c(e){this.view=void 0,this.getValue=function(){return e.innerHTML},this.setValue=function(t){return e.innerHTML=t,this},this.for=function(){return[e.getAttribute("data-for")]},this.parent=function(e){return this.view=e,this},this.refresh=function(){e.innerHTML=this.view.get(this.for()[0])}}const f={HTMLNodeAdapter:c,findAdapters:function(e){return"input"!==e.tagName.toLowerCase()&&"textarea"!==e.tagName.toLowerCase()&&"select"!==e.tagName.toLowerCase()&&e.hasAttribute("data-for")?[new c(e)]:[]}};function d(e,t,n){this.element=e,this.name=t,this.value=n,this.adapters=this.makeAdapters(),this.view=void 0,this.setData=function(e){for(var t=0;t<this.adapters.length;t++)this.adapters[t].setValue(e[this.adapters[t].getName()])},this.replace=function(){for(var e="",t=0;t<this.adapters.length;t++)e+=this.adapters[t].replace();return e}}function p(e,t){var n=null;this.setValue=function(e){n=e},this.getValue=function(){return n},this.getName=function(){return-1!==e.indexOf("?")?e.substr(0,e.indexOf("?")):e},this.isReadOnly=function(){return t},this.replace=function(){if(t)return e;if(-1!==e.indexOf("?")){var i=e.substr(e.indexOf("?")+1).split(":");return n?i[0]:i[1]}return n}}d.prototype={hasLysine:function(){return-1!==this.name.search(/^data-lysine-/)},getAttributeName:function(){return this.name.replace(/^data-lysine-/,"").toLowerCase()},makeAdapters:function(){if(!this.hasLysine())return[];for(var e=/\{\{([A-Za-z0-9\.\s\?\-\:\_]+)\}\}/g,t=[],n=this.value.split(/\{\{[A-Za-z0-9\.\s\?\-\:\_]+\}\}/g),i=e.exec(this.value);i;)t.push(new p(n.shift(),!0)),t.push(new p(i[1],!1)),i=e.exec(this.value);return n.length>0&&t.push(new p(n.shift(),!0)),t},for:function(){var e=a([]);return a(this.adapters).each((function(t){t.isReadOnly()||e.push(t.getName())})),e.raw()},parent:function(e){return this.view=e,this},refresh:function(){var e=this;a(this.adapters).each((function(t){t.isReadOnly()||t.setValue(e.view.get(t.getName()))})),this.element.setAttribute(this.getAttributeName(),this.replace())}};const v={AttributeAdapter:d,findAdapters:function(e){var t=e.attributes,n=a([]);if(!t)return n;for(var i=0;i<t.length;i++)n.push(new d(e,t[i].name,t[i].value));return n.filter((function(e){return e.hasLysine()}))}};if(void 0===HTMLElement)throw"Lysine requires a browser to work. HTMLElement class was not found";if(void 0===window)throw"Lysine requires a browser to work. Window variable was not found";function m(e){this.views=[],this.base=e,this.parentView=void 0,this.listeners=a([]),this.writeProtect=!1,this._setup=a([]),this._tearDown=a([]),this.getValue=function(){var e,t=[];for(this.views=this.views.filter((function(e){return!e.isDestroyed()})),e=0;e<this.views.length;e+=1)t.push(this.views[e].getValue());return t},this.setValue=function(e){var t,n;if(!this.writeProtect&&void 0!==e){for(e=e.filter((function(e){return!!e})),this.views=this.views.filter((function(e){return e.reset()&&!e.isDestroyed()}));e.length<this.views.length;)this.views[e.length].destroy();this.views=this.views.slice(0,e.length);var i=this._tearDown;for(a(this.views).each((function(e){i.each((function(t){t(e)}))})),t=this.views.length;t<e.length;t+=1)n=new g(this.base),this.views.push(n),n.setParent(this),this.listeners.each((function(e){n.on.apply(n,e)}));i=this._setup;for(a(this.views).each((function(e){i.each((function(t){t(e)}))})),t=0;t<e.length;t++)this.views[t].setValue(e[t])}},this.for=function(){return[this.base.getAttribute("data-for")]},this.on=function(e,t,n){this.listeners.push([e,t,n]),this.views.forEach((function(i){i.on(e,t,n)}))},this.setUp=function(e){this._setup.push(e)},this.tearDown=function(e){this._tearDown.push(e)},this.parent=function(e){return this.parentView=e,this},this.push=function(e){var t=new g(this.base);return this.views.push(t),t.setValue(e),t.setParent(this),this.listeners.each((function(e){t.on.apply(t,e)})),this.propagate(),t},this.refresh=function(){this.setValue(this.parentView.get(this.for()[0]))},this.propagate=function(){this.writeProtect=!0,this.parentView.set(this.for()[0],this.getValue()),this.writeProtect=!1}}function y(e,t,n){var i=/([a-zA-Z_0-9]+)\(([a-zA-Z_0-9\-]+)\)\s?(\=\=|\!\=)\s?(.+)/g.exec(e);if(null===i)throw"Malformed expression: "+e;var r=i[1],s=i[2],o=i[3],u=i[4],h=void 0,l=t.parentNode,c=t.nextSibling;this.isVisible=function(){var e=void 0;switch(r){case"null":e=null===h.get(s)?"true":"false";break;case"bool":e=!0===h.get(s)?"true":"false";break;case"count":e=h.get(s)?h.get(s).length:0;break;case"value":e=h.get(s)}return"=="===o?e==u:e!=u},this.test=function(){var e=this.isVisible();e!==(t.parentNode===l)&&(e?l.insertBefore(t,c):l.removeChild(t))},this.for=function(){var e=a([]);return n.each((function(t){e.merge(t.for())})),e.push(s),e.raw()},this.parent=function(e){return h=e,n.each((function(t){t.parent(e)})),this},this.refresh=function(){this.test(),this.isVisible()&&n.each((function(e){e.refresh()}))}}function g(e,n){var i,s,o=[],h={},c={modules:void 0};Object.assign(c,n),this.destroyed=!1,this.parent=void 0,this._module=c.modules,i=e instanceof HTMLElement?e:document.querySelector('*[data-lysine-view="'+e+'"]'),this.set=function(e,t){if("^"===e.substr(0,1))return this.parent.parentView.set(e.substr(1),t);for(var n=h,i=e.split("."),r=i.pop(),s=0;s<i.length;s++)n[i[s]]||(n[i[s]]={}),n=n[i[s]];n[r]=t,this.adapters.each((function(e){-1!==e.for().indexOf(i[0]||r)&&e.refresh()})),this.parent&&this.parent.propagate(this,h)},this.get=function(e){if("^"===e.substr(0,1))return this.parent.parentView.get(e.substr(1));for(var t=h,n=e.split("."),i=0;i<n.length;i++)t=t?t[n[i]]:void 0;return t},this.setData=function(e){h=e,this.adapters.each((function(e){e.refresh()}))},this.getData=function(){return h},this.reset=function(){for(var e=s.querySelectorAll("input"),t=0;t<e.length;t++)switch(e[t].type){case"checkbox":case"radio":e[t].checked=e[t].hasAttribute("checked");default:e[t].value=e[t].hasAttribute("value")?e[t].getAttribute("value"):""}return!0},this.getValue=this.getData,this.setValue=this.setData,this.fetchAdapters=function(e){e=void 0!==e?e:s;var t=a([]),n=this;return a(e.childNodes).each((function(e){var i=a([]);if(3!==e.nodeType){if(e.getAttribute&&e.getAttribute("data-for"))if(e.hasAttribute("data-lysine-view"))i.merge(a([new m(e).parent(n)]));else{var r=a([]).merge(u.findAdapters(e)).merge(l.findAdapters(e)).merge(f.findAdapters(e));i.merge(r.each((function(e){return e.parent(n)})))}else i.merge(n.fetchAdapters(e));if(i.merge(v.findAdapters(e).each((function(e){return e.parent(n)}))),e.getAttribute&&e.getAttribute("data-condition")){var s=new y(e.getAttribute("data-condition"),e,i);t.push(s.parent(n))}else t.merge(i)}})),t},this.getHTML=function(){return s},this.getElement=this.getHTML,this.destroy=function(){return this.destroyed=!0,this.parent&&this.parent.propagate(),s.parentNode.removeChild(s),a(o).each((function(e){document.removeEventListener(e[0],e[1])})),this},this.isDestroyed=function(){return this.destroyed},this.on=function(e,n,i){var s=this,u=t()(n,(function(t){return r()(t,(function(e){return e===s.getHTML()}))&&a(s.getHTML().querySelectorAll(e)).filter((function(e){return e===t})).raw()[0]}),(function(e,t){i.call(t,e,s)}));return o.push([n,u]),u},this.sub=function(e){return this.adapters.filter((function(t){return-1!==t.for().indexOf(e)})).get(0)},this.setParent=function(e){this.parent=e},this.find=function(e){return this.getHTML().querySelector(e)},this.findAll=function(e){return this.getHTML().querySelectorAll(e)},this.module=function(e){return this._module=e,this.refreshModules(),this},this.refreshModules=function(e){var t=this;if(void 0!==t._module&&3!==(e=e||s).nodeType&&"svg"!==e.tagName.toLowerCase()){for(var n=[],i=0;i<e.classList.length;i++)n.push(t._module[e.classList[i]]||e.classList[i]);e.className="",e.classList.add(...n),e.id=t._module[e.id]||e.id,a(e.childNodes).each((function(e){t.refreshModules(e)}))}};var d=void 0;if(i.content)d=i.content.firstElementChild;else for(d=i.firstChild;d&&1!=d.nodeType;)d=d.nextSibling;s=document.importNode(d,!0),this._module&&this.refreshModules(),this.adapters=this.fetchAdapters(),i.parentNode.insertBefore(s,i)}var w=null,b=document.querySelector('meta[name="ping.id"]').content,A=[];window._l=g;var L=function e(){var t,n=document.documentElement,i=Math.max(n.scrollTop,window.scrollY);(function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)})()-i<n.clientHeight+700&&(t=e,null===w&&(0!==b?((w=new XMLHttpRequest).open("GET",document.location+".json?until="+b),document.getElementById("loading-spinner").style.display="block",w.onreadystatechange=function(){if(4===w.readyState&&200===w.status){var e=JSON.parse(w.responseText);b=0===e.payload.length||null===e.until?0:e.until;for(var n=0;n<e.payload.length;n++){var i=new g("ping");if(A.push(i),i.setData({id:e.payload[n].id,userName:e.payload[n].user.username,avatar:e.payload[n].user.avatar,removed:e.payload[n].removed,staff:e.payload[n].staff,userURL:e.payload[n].user.url,embed:e.payload[n].embed,notificationURL:e.payload[n].url||"#",notificationContent:e.payload[n].content,media:e.payload[n].media,share:e.payload[n].share,poll:e.payload[n].poll,feedback:e.payload[n].feedback,timeRelative:e.payload[n].timeRelative,replyCount:e.payload[n].replies||"Reply",shareCount:e.payload[n].shares||"Share",irt:e.payload[n].irt?[e.payload[n].irt]:[]}),!e.payload[n].irt&&i.getHTML().querySelector(".irt")){var r=i.getHTML().querySelector(".irt");r.parentNode.removeChild(r)}var s=i.getHTML().querySelector(".media-preview");if(e.payload[n].media&&e.payload[n].explicit&&s){var a=s.parentNode.insertBefore(document.createElement("div"),s);a.className="media-cover",a.appendChild(document.createElement("span")).appendChild(document.createTextNode("Ping may contain sensitive media")),a.addEventListener("click",function(e,t){return function(){e.style.display="none",t.style.display=null}}(a,s),!1),s.style.display="none"}}w=null,t(),document.getElementById("loading-spinner").style.display="none"}},w.send()):document.getElementById("end-of-feed").style.display="block"))};window.addEventListener("load",L,!1),document.addEventListener("scroll",L,!1)})()})();